<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started :: Stackable Documentation</title>
    <link rel="canonical" href="https://docs.stackable.tech/home/getting_started.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../_/css/site.css">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.stackable.tech">Stackable Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="home" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Stackable Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="getting_started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="supported-versions.html">Supported Product Versions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="monitoring.html">Monitoring</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Internal Docs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="internal/personas.html">Customer Personas</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Stackable Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Stackable Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../airflow/index.html">Stackable Operator for Apache Airflow</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../airflow/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../druid/index.html">Stackable Operator for Apache Druid</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../druid/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../hbase/index.html">Stackable Operator for Apache HBase</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../hbase/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../hdfs/index.html">Stackable Operator for Apache HDFS</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../hdfs/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../hive/index.html">Stackable Operator for Apache Hive</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../hive/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../kafka/index.html">Stackable Operator for Apache Kafka</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../kafka/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../nifi/index.html">Stackable Operator for Apache NiFi</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../nifi/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../spark/index.html">Stackable Operator for Apache Spark</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../spark/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../superset/index.html">Stackable Operator for Apache Superset</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../superset/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../zookeeper/index.html">Stackable Operator for Apache ZooKeeper</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../zookeeper/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../monitoring/index.html">Stackable Operator for Monitoring and Metrics</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../monitoring/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../opa/index.html">Stackable Operator for OpenPolicyAgent</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../opa/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../regorule/index.html">Stackable Operator for OpenPolicyAgent Rego rules</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../regorule/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../trino/index.html">Stackable Operator for Trino</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../trino/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Stackable Documentation</a></li>
    <li><a href="getting_started.html">Getting Started</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/stackabletech/documentation/edit/main/modules/ROOT/pages/getting_started.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Getting Started</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>One of the best ways of getting started with a new platform is to try it out. Any big data platform has a lot of moving parts and getting some hands on keyboard time with it helps reinforce learning.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about_this_guide"><a class="anchor" href="#_about_this_guide"></a>About this guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Firstly, let’s cover whether this <strong>Getting Started</strong> guide is right for you. This is intended as a learning tool to discover more about Stackable, its deployment and architecture.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you just want to get up and running quickly there is a quickstart script that will install services on a single node available in the <a href="https://github.com/stackabletech/stackable-utils">stackable-utils</a> repository on GitHub.</p>
</li>
<li>
<p>If you want to build a production cluster then this is not for you. This tutorial is to familiarise you with the Stackable architecture and is not a guide for building robust clusters.</p>
</li>
<li>
<p>This is intended for use in a private network or lab; it doesn’t enable any security features such as authentication or encryption and should not be directly connected to the Internet. Be careful if you&#8217;re deploying in the cloud as your instances may default to using public IPs.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We’re going to build a small cluster in this tutorial, so the first thing we need is some machines to build the cluster on. Maybe you have some spare servers sitting around you can use but for most people running virtual machines makes more sense. If you’ve sufficient resources on your workstation you can run them on there, or launch cloud instances if you prefer. However you choose to deploy, we recommend running your cluster across multiple hosts since this is much closer to a typical deployment.</p>
</div>
<div class="paragraph">
<p>Stackable requires a Kubernetes control plane to manage the cluster and one or more worker nodes to run the services themselves. We’ll build a simple cluster with 3 services; Apache ZooKeeper, Apache Kafka and Apache NiFi. For simplicity, we will deploy an instance of each of these services onto 3 separate nodes.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/getting_started_arch.png" alt="High-level deployment architecture for Stackable" width="600"></span></p>
</div>
<div class="paragraph">
<p>Since this is a walkthrough on how to install Stackable and we’re not building a production cluster, we can be fairly frugal with our resources. We’ll be using Ubuntu 20.04 running in VirtualBox in this walkthrough and recommend that you do the same as this will help you follow the instructions in this guide. It is assumed that you will know how to perform systems administration tasks such as configuring virtual machines, setting the hostnames and configuring name resolution. The virtual machines will require internet access to download the software.</p>
</div>
<div class="paragraph">
<p>Below is a table for recommended sizing for this tutorial. Bear in mind that these sizings are not intended for operational clusters, but for the purpose of this tutorial. If you run any significant load through this cluster then you will almost certainly need to assign more memory and disk space.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Hostname</th>
<th class="tableblock halign-left valign-top">Minimum RAM</th>
<th class="tableblock halign-left valign-top">Minimum Disk Space</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controller node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.stackable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Worker node 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">node1.stackable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Worker node 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">node2.stackable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Worker node 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">node3.stackable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 GB</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_installing_kubernetes"><a class="anchor" href="#_installing_kubernetes"></a>Installing Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Stackable’s control plane is built around Kubernetes. We’ll be deploying services not as containers but as regular services controlled by systemd. Stackable Agent is a custom kubelet and bridges the worlds between Kubernetes and native deployment. For this walkthrough we’ll be using K3s, which offers a very quick and easy way to bootstrap your Kubernetes infrastructure.</p>
</div>
<div class="paragraph">
<p>On your <strong>controller</strong> node run the following commands as root to install K3s:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>apt-get install curl
curl -sfL https://get.k3s.io | sh -</pre>
</div>
</div>
<div class="paragraph">
<p>So long as your VM has an Internet connection it will download and automatically configure a simple Kubernetes environment.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>root@kubernetes:~# curl -sfL https://get.k3s.io | sh -
[INFO]  Finding release for channel stable
[INFO]  Using v1.21.3+k3s1 as release
[INFO]  Downloading hash https://github.com/k3s-io/k3s/releases/download/v1.21.3+k3s1/sha256sum-amd64.txt
[INFO]  Downloading binary https://github.com/k3s-io/k3s/releases/download/v1.21.3+k3s1/k3s
[INFO]  Verifying binary download
[INFO]  Installing k3s to /usr/local/bin/k3s
[INFO]  Creating /usr/local/bin/kubectl symlink to k3s
[INFO]  Creating /usr/local/bin/crictl symlink to k3s
[INFO]  Creating /usr/local/bin/ctr symlink to k3s
[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh
[INFO]  Creating uninstall script /usr/local/bin/k3s-uninstall.sh
[INFO]  env: Creating environment file /etc/systemd/system/k3s.service.env
[INFO]  systemd: Creating service file /etc/systemd/system/k3s.service
[INFO]  systemd: Enabling k3s unit
Created symlink /etc/systemd/system/multi-user.target.wants/k3s.service → /etc/systemd/system/k3s.service.
[INFO]  systemd: Starting k3s</pre>
</div>
</div>
<div class="paragraph">
<p>To check if everything worked as expected you can use <code>kubectl cluster-info</code> to retrieve the cluster information.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>root@kubernetes:~# kubectl cluster-info
Kubernetes control plane is running at https://127.0.0.1:6443
CoreDNS is running at https://127.0.0.1:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
Metrics-server is running at https://127.0.0.1:6443/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy</pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have Kubernetes running on the controller node we need to install it on the worker nodes. To do this we run the same installation script on the worker nodes, this time setting the K3S_URL and K3S_TOKEN environment variables. Set the K3S_URL to the URL for your coordinator node and K3S_TOKEN to the token value stored in /var/lib/rancher/k3s/server/node-token on the coordinator node:</p>
</div>
<div class="paragraph">
<p><code>curl -sfL <a href="https://get.k3s.io" class="bare">https://get.k3s.io</a> | K3S_URL=https://quickstart:6443 K3S_TOKEN=K108474026907640fe31785a65eda0f6fee40e7a084373e7a81cf39214bccc5b31e::server:3c56a97694c46b3c609f77e0aba9839e sh -</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_helm"><a class="anchor" href="#_installing_helm"></a>Installing Helm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Stackable uses Helm as the package manager for Kubernetes operators. This greatly simplifies the deployment and management of Kubernetes operators and CRDs. On your controller node run the following command as root to install Helm:</p>
</div>
<div class="paragraph">
<p><code>/usr/bin/curl -sfL <a href="https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3" class="bare">https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3</a> | /bin/bash -</code></p>
</div>
<div class="paragraph">
<p>Once Helm has been installed you can add the Stackable operator repo. There is a development and a stable repository available.</p>
</div>
<div class="sect3">
<h4 id="_stackable_development_repository"><a class="anchor" href="#_stackable_development_repository"></a>Stackable Development Repository</h4>
<div class="paragraph">
<p><code>/usr/local/bin/helm repo add stackable-devel <a href="https://repo.stackable.tech/repository/helm-dev/" class="bare">https://repo.stackable.tech/repository/helm-dev/</a></code></p>
</div>
</div>
<div class="sect3">
<h4 id="_stackable_stable_repository"><a class="anchor" href="#_stackable_stable_repository"></a>Stackable Stable Repository</h4>
<div class="paragraph">
<p><code>/usr/local/bin/helm repo add stackable <a href="https://repo.stackable.tech/repository/helm-stable/" class="bare">https://repo.stackable.tech/repository/helm-stable/</a></code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_stackable"><a class="anchor" href="#_installing_stackable"></a>Installing Stackable</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_installing_stackable_operators"><a class="anchor" href="#_installing_stackable_operators"></a>Installing Stackable Operators</h3>
<div class="paragraph">
<p>The Stackable operators are components that translate the service definitions deployed via Kubernetes into deploy services on the worker nodes. These can be installed on any node that has access to the Kubernetes control plane. In this example we will install them on the controller node.</p>
</div>
<div class="paragraph">
<p>Stackable operators are installed using Helm charts. Run the following commands to install the operators for ZooKeeper, Kafka and NiFi using the repo configured earlier. The --devel flag will choose the latest available version; alternatively the --version flag can be used to deploy a specific version.</p>
</div>
<div class="sect3">
<h4 id="_stackable_development_repository_2"><a class="anchor" href="#_stackable_development_repository_2"></a>Stackable Development Repository</h4>
<div class="paragraph">
<p><code>/usr/local/bin/helm install zookeeper-operator stackable-devel/zookeeper-operator --devel</code></p>
</div>
<div class="paragraph">
<p><code>/usr/local/bin/helm install kafka-operator stackable-devel/kafka-operator --devel</code></p>
</div>
<div class="paragraph">
<p><code>/usr/local/bin/helm install nifi-operator stackable-devel/nifi-operator --devel</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_stackable_stable_repository_2"><a class="anchor" href="#_stackable_stable_repository_2"></a>Stackable Stable Repository</h4>
<div class="paragraph">
<p><code>/usr/local/bin/helm install zookeeper-operator stackable/zookeeper-operator --devel</code></p>
</div>
<div class="paragraph">
<p><code>/usr/local/bin/helm install kafka-operator stackable/kafka-operator --devel</code></p>
</div>
<div class="paragraph">
<p><code>/usr/local/bin/helm install nifi-operator stackable/nifi-operator --devel</code></p>
</div>
<div class="paragraph">
<p>You can check which operators are installed using <code>helm list</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>user@quickstart:~/stackable-utils/quickstart$ sudo helm list
NAME              	NAMESPACE	REVISION	UPDATED                                	STATUS  	CHART                         	APP VERSION
zookeeper-operator	default  	1       	2021-11-22 15:59:39.347466654 +0000 UTC	deployed	zookeeper-operator-0.1.0+mr255	0.4.0</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_stackable_services"><a class="anchor" href="#_deploying_stackable_services"></a>Deploying Stackable Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this point you’ve successfully deployed the Stackable node infrastructure and are ready to deploy services to the cluster. To do this we provide service descriptions to Kubernetes for each of the services we wish to deploy.</p>
</div>
<div class="sect2">
<h3 id="_apache_zookeeper"><a class="anchor" href="#_apache_zookeeper"></a>Apache ZooKeeper</h3>
<div class="paragraph">
<p>We will deploy 3 Apache ZooKeeper instances to our cluster. This is a fairly typical deployment to provide resilience against the failure of a single ZooKeeper node.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl apply -f - &lt;&lt;EOF
---
apiVersion: zookeeper.stackable.tech/v1alpha1
kind: ZookeeperCluster
metadata:
  name: simple
spec:
  version: 3.5.8
  servers:
    roleGroups:
      default:
        selector:
          matchLabels:
            kubernetes.io/os: linux
        replicas: 3
        config:
          adminPort: 12000
          clientPort: 2181
          metricsPort: 9505
          dataDir: /var/lib/zookeeper
          initLimit: 5
          syncLimit: 2
EOF</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_apache_kafka"><a class="anchor" href="#_apache_kafka"></a>Apache Kafka</h3>
<div class="paragraph">
<p>We will deploy 3 Apache Kafka brokers, another typical deployment pattern for Kafka clusters. Note that Kafka depends on the ZooKeeper service and the zookeeperReference property below points to the namespace and name we gave to the ZooKeeper service deployed previously.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl apply -f - &lt;&lt;EOF
---
apiVersion: kafka.stackable.tech/v1alpha1
kind: KafkaCluster
metadata:
  name: simple
spec:
  version:
    kafka_version: 2.8.0
  zookeeperReference:
    namespace: default
    name: simple
  brokers:
    roleGroups:
      default:
        selector:
          matchLabels:
            kubernetes.io/os: linux
        replicas: 3
        config:
          logDirs: "/tmp/kafka-logs"
          metricsPort: 9605</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_apache_nifi"><a class="anchor" href="#_apache_nifi"></a>Apache NiFi</h3>
<div class="paragraph">
<p>We will deploy 3 Apache NiFi servers. This might seem over the top for a tutorial cluster, but it&#8217;s worth pointing out that the operator will cluster the 3 NiFi servers for us automatically.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl apply -f - &lt;&lt;EOF
---
apiVersion: nifi.stackable.tech/v1alpha1
kind: NifiCluster
metadata:
  name: simple
spec:
  metricsPort: 8428
  version: "1.13.2"
  zookeeperReference:
    name: simple
    namespace: default
    chroot: /nifi
  nodes:
    roleGroups:
      default:
        selector:
          matchLabels:
            kubernetes.io/os: linux
        replicas: 3
        config:
          nifiWebHttpPort: 10000
          nifiClusterNodeProtocolPort: 10443
          nifiClusterLoadBalancePort: 6342
EOF</pre>
</div>
</div>
<div class="paragraph">
<p>You can check the status of the services using <code>kubectl get pods</code>. This will retrieve the status of all pods running in the default namespace.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>root@kubernetes:~# kubectl get pods
NAME                                    READY   STATUS       RESTARTS   AGE
zookeeper-simple-default-server-node3   1/1     Running      0          6m32s
nifi-simple-default-node-node3          1/1     Running      0          6m32s
kafka-simple-default-broker-node3       1/1     Running      0          6m32s
zookeeper-simple-default-server-node2   1/1     Running      0          6m32s
kafka-simple-default-broker-node2       1/1     Running      0          6m32s
nifi-simple-default-node-node2          1/1     Running      0          6m32s
kafka-simple-default-broker-node1       1/1     Running      0          6m32s
nifi-simple-default-node-node1          1/1     Running      0          6m32s
zookeeper-simple-default-server-node1   1/1     Running      0          6m32s</pre>
</div>
</div>
<div class="paragraph">
<p>Since this is the first time that each of these services has been deployed to these nodes the Stackable Agent needs to download the software from the Stackable repository. It may take a few minutes to complete the download and deploy the services.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing_your_cluster"><a class="anchor" href="#_testing_your_cluster"></a>Testing your cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If all has gone well then you will have successfully deployed a Stackable cluster and used it to start three services that should now be ready for you.</p>
</div>
<div class="sect2">
<h3 id="_apache_zookeeper_2"><a class="anchor" href="#_apache_zookeeper_2"></a>Apache ZooKeeper</h3>
<div class="paragraph">
<p>Log onto one of your <strong>worker</strong> nodes and run the ZooKeeper CLI shell. Stackable stores the service software in /opt/stackable/packages, so you may wish to add this to your PATH environment variable.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>PATH=$PATH:/opt/stackable/packages/zookeeper-3.5.8/apache-zookeeper-3.5.8-bin/bin
zkCli.sh</pre>
</div>
</div>
<div class="paragraph">
<p>The shell should connect automatically to the ZooKeeper server running on localhost. You can run the <code>ls /</code> command to see the list of znodes in the root path, which should include those created by Apache Kafka and Apache NiFi.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[zk: localhost:2181(CONNECTED) 0] ls /
[admin, brokers, cluster, config, consumers, controller, controller_epoch, feature, isr_change_notification, latest_producer_id_block, log_dir_event_notification, nifi, zookeeper]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_apache_kafka_2"><a class="anchor" href="#_apache_kafka_2"></a>Apache Kafka</h3>
<div class="paragraph">
<p>To test Kafka we&#8217;ll use the tool <code>kafkacat</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo apt install kafkacat</pre>
</div>
</div>
<div class="paragraph">
<p>With <code>kafkacat</code> installed we can log into one of the <strong>worker</strong> nodes query the metadata on the broker running on localhost.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>user@node1:~$ kafkacat -b localhost -L
 Metadata for all topics (from broker -1: localhost:9092/bootstrap):
  3 brokers:
   broker 1001 at node2.stackable:9092 (controller)
   broker 1003 at node1.stackable:9092
   broker 1002 at node3.stackable:9092
  0 topics:</pre>
</div>
</div>
<div class="paragraph">
<p>We should see 3 brokers listed, showing that Stackable has successfully deployed the brokers as a cluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="_apache_nifi_2"><a class="anchor" href="#_apache_nifi_2"></a>Apache NiFi</h3>
<div class="paragraph">
<p>Apache NiFi provides a web interface and the easiest way to test it is to view this in a web browser. Browse to the address of one of your <strong>worker</strong> nodes on port 10000 e.f. <a href="http://node1.stackable:10000/nifi" class="bare">http://node1.stackable:10000/nifi</a> and you should see the NiFi Canvas.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/nifi_menu.png" alt="The Apache NiFi web interface"></span></p>
</div>
<div class="paragraph">
<p>Click on the menu and select Cluster as illustrated in the screenshot above and you&#8217;ll see that the 3 NiFi servers have been deployed as a cluster.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/nifi_cluster.png" alt="The Apache NiFi Cluster status screen"></span></p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
