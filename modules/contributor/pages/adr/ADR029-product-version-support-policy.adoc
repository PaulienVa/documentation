= ADR029: Product version support policy
Sebastian <sebastian.bernauer@stackable.tech>
v0.1, 2023-05-08
:status: draft

* Status: {status}
* Contributors:
** Andrew Kenworthy
** Felix Hennig
** Lars Francke
** Maximilian Wittich
** Malte Sander
** Natalie Klestrup Röijezon
** Razvan Mihai
** Sebastian Bernauer
** Sönke Liebau
** Vladislav Supalov
* Date: 2023-05-08

WARNING: TODO: Decide on a policy if users need to go through every platform release line when upgrading, or if they could e.g. go from 23.1 directly to 23.7. We need a decision on how many releases they can skip (e.g. 0).

== Context and Problem Statement

// Describe the context and problem statement, e.g., in free form using two to three sentences. You may want to articulate the problem in form of a question.

Users of the Stackable platform often times want to stay on a specific product version - sometime also platform version.
While staying on a specific set of versions would theoretically work, the customers often want security updates, hence the reason we need to maintain older versions - for operators as well as product versions.

We currently don't have CRD versioning yet, this will be added in the future.

Currently we do support the last 3 Kubernetes versions.

== Decision Drivers

* Customer requirements for stability, but also security updates
* Maintenance/support effort

== Considered Options



=== LTS lines per product
We set ourselves the following constraints:

1. Patch level versions can be replaced by newer patch level versions in any release without prior deprecation notice.
2. Every product version that get's removed needs to be deprecated for at least *1* release before removal.
This guarantees that users can update the operators (e.g. from 23.1 to 23.4) without the need to simultaneously update the product version as well.
The flow is to first update the control plane (the operators) and afterwards the product versions if desired (e.g. when the version is now deprecated).

For every product there is always *1* LTS line we support and - in general - recommend to use.
Normally this is a minor release line of the products containing the latest patch version.
The exceptions could be e.g. Trino (which just uses a single number as release version), in which case a fixed release would be considered a release line.
It will be supported for at least *4* consecutive releases - as well as at least for one year (whatever lasts longer).
After the given number of releases (or months) we can deprecate the release line and pick a new one or continue supporting the release line.

In addition to the LTS line we also ship the latest version of the product with every release.
It does not need to always be the latest version, e.g. when the latest version is not mature enough or causes problems, but should be pretty recent.

One example flow is shown below:

image::adr/29-product-versions.png[]

== Decision Outcome

Option <<LTS lines per product>> was chosen.
