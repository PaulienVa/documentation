<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Authentication with OpenLDAP :: Stackable Documentation</title>
    <link rel="canonical" href="https://docs.stackable.tech/home/stable/tutorials/authentication_with_openldap.html">
    <meta name="generator" content="Antora 3.1.0">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script type="text/javascript"> var tCPrivacyTagManager = "gtm"; </script>
    <script>
        var consent = document.createElement("script");
        if(window.location.pathname.indexOf("/en/") > -1){
            // Default is EN Cookie Banner if /en/ in path
            consent.src = "https://cdn.trustcommander.net/privacy/4616/privacy_v2_27.js";
        } else {
            // Default is DE Cookie Banner
            consent.src = "https://cdn.trustcommander.net/privacy/4616/privacy_v2_9.js";
        }
        consent.type = "text/javascript";
        document.head.appendChild(consent);
    </script>
    <!-- Matomo consent with trustcommander -->
    <script type="text/tc_privacy" data-category="2">
    console.log('consent provided for Matomo')
    <!-- Matomo -->
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setCookieDomain", "*.stackable.tech"]);
    _paq.push(["setDomains", ["*.stackable.tech"]]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
        var u="https://stackable.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '2']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='//cdn.matomo.cloud/stackable.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
    })();
    </script>
    <!-- End Matomo Code -->
    <script>var uiRootPath = '../../../_'</script>
    <link rel="icon" href="../../../_/img/favicon.png" type="image/png">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://stackable.tech"><img src="../../../_/img/stackable-logo.png"></a>
      <a class="navbar-item documentation-link" href="https://docs.stackable.tech">Documentation</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search...">
        </div>
      </div>
      <button class="navbar-burger" data-target="navbar-sub">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <a href="https://www.stackable.tech/contact/" class="button pull-right">Contact Us</a>
    </div>
      <div id="topbar-nav" class="navbar-menu">
      </div>
      </div>
    </nav>
    <nav id="navbar-sub" class="navbar-sub">
      <div class="container">
<a class="navbar-sub-item" href="../../stable/index.html">Home</a>
<a class="navbar-sub-item" href="../../stable/getting_started.html">Getting Started</a>
<a class="navbar-sub-item" href="../../stable/concepts/index.html">Concepts</a>
<a class="navbar-sub-item" href="../../stable/tutorials/end-to-end_data_pipeline_example.html">Tutorials</a>
<a class="navbar-sub-item" href="../../../stackablectl/stable/index.html">stackablectl</a>
<div class="navbar-sub-item drop-down">
    Operators
    <div class="drop-down-content">
        <a class="drop-down-item" href="../../stable/operators/index.html">Overview</a>
        <a class="drop-down-item" href="../../../airflow/stable/index.html">Apache Airflow</a>
        <a class="drop-down-item" href="../../../druid/stable/index.html">Apache Druid</a>
        <a class="drop-down-item" href="../../../hbase/stable/index.html">Apache HBase</a>
        <a class="drop-down-item" href="../../../hdfs/stable/index.html">Apache Hadoop HDFS</a>
        <a class="drop-down-item" href="../../../hive/stable/index.html">Apache Hive</a>
        <a class="drop-down-item" href="../../../kafka/stable/index.html">Apache Kafka</a>
        <a class="drop-down-item" href="../../../nifi/stable/index.html">Apache NiFi</a>
        <a class="drop-down-item" href="../../../spark-k8s/stable/index.html">Apache Spark on K8S</a>
        <a class="drop-down-item" href="../../../superset/stable/index.html">Apache Superset</a>
        <a class="drop-down-item" href="../../../trino/stable/index.html">Trino</a>
        <a class="drop-down-item" href="../../../zookeeper/stable/index.html">Apache ZooKeeper</a>
        <a class="drop-down-item" href="../../../opa/stable/index.html">OpenPolicyAgent</a>
        <a class="drop-down-item" href="../../../commons-operator/stable/index.html">Commons</a>
        <a class="drop-down-item" href="../../../secret-operator/stable/index.html">Secret</a>
        <a class="drop-down-item" href="../../../listener-operator/stable/index.html">Listener</a>
    </div>
</div>
<a class="navbar-sub-item" href="../../stable/contributor/index.html">Contribute</a>

        <a class="arrow" href="javascript:document.querySelector('.navbar-sub').classList.toggle('open')">
          <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></svg>
        </a>
      </div>
    </nav>
  </header>
<div class="body">
    <div class="container">
<div class="nav-container" data-component="home" data-version="nightly">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <div class="title-wrapper">
      <h3 class="title"><a href="../index.html">Stackable Documentation</a></h3>
      <div class="page-versions">
        <button class="version-menu-toggle" title="Show other versions of page">nightly</button>
        <div class="version-menu">
          <a class="version is-current" href="authentication_with_openldap.html">nightly</a>
          <a class="version" href="../../stable/tutorials/authentication_with_openldap.html">23.1</a>
          <a class="version is-missing" href="../../22.11/index.html">22.11</a>
          <a class="version is-missing" href="../../22.09/index.html">22.09</a>
          <a class="version is-missing" href="../../22.06/index.html">22.06</a>
        </div>
      </div>
    </div>
    <ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../quickstart.html">Quickstart</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting_started.html">Getting Started</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../concepts/index.html">Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/roles-and-role-groups.html">Roles and role groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/service_discovery.html">Service discovery ConfigMap</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/opa.html">OPA authorization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/product_image_selection.html">Product image selection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/pvc.html">PersistentVolumeClaim usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/resources.html">Resource management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/s3.html">S3 resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/tls_server_verification.html">TLS server verification</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Tutorials</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="end-to-end_data_pipeline_example.html">Setting up an end-to-end data pipeline</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="authentication_with_openldap.html">Authentication with OpenLDAP</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../reference/index.html">Reference</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/authenticationclass.html">AuthenticationClass</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/s3.html">S3 resources</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../operators/index.html">Operators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operators/supported_versions.html">Supported Product Versions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operators/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../airflow/stable/index.html">Apache Airflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../druid/stable/index.html">Apache Druid</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../hbase/stable/index.html">Apache HBase</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../hdfs/stable/index.html">Apache Hadoop HDFS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../hive/stable/index.html">Apache Hive</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../kafka/stable/index.html">Apache Kafka</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../nifi/stable/index.html">Apache NiFi</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../spark-k8s/stable/index.html">Apache Spark on K8S</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../superset/stable/index.html">Apache Superset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../trino/stable/index.html">Trino</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../zookeeper/stable/index.html">Apache ZooKeeper</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../opa/stable/index.html">OpenPolicyAgent</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../commons-operator/stable/index.html">Commons</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../secret-operator/stable/index.html">Secret</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../contributor/index.html">Contributor&#8217;s Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributor/steps.html">Steps to contribute</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributor/development_dashboard.html">Development Dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributor/style_guide.html">Documentation style guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Implementation guidelines</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contributor/service_discovery.html">Service discovery implementation guidelines</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../contributor/opa_configuration.html">OPA connection implementation guidelines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../contributor/adr/index.html">Architectural Decision Records</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Current</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR001-choose_project_language.html">ADR001: Use English as Documentation Language</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR002-choose_repository_structure.html">ADR002: Use Multiple Repositories instead of one Large Repository</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR003-choose_review_mechanism.html">ADR003: Use RTC as Review Mechanism for Changes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR004-choose_agent_programming_language.html">ADR004: Use Rust as programming language for the agent</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR005-systemd_unit_file_location.html">ADR005: Decide on handling and location of systemd unit files</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR007-defined_reuse_of_k8s.html">ADR007: Decide if Kubernetes Components Are to be Reused for Stackable</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR008-decide_reuse_of_operators.html">ADR008: Allow Reuse of Existing Kubernetes Operators</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR009-selector_support.html">ADR009: Assigning Services to Nodes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR010-command_pattern.html">ADR010: Expressing one-shot commands in a Kubernetes-native way</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR011-directory_structure.html">ADR011: Directory Structure Used by Stackable Components on Managed Hosts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR012-authn_token_management.html">ADR012: Authentication token management</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR013-supported_kubernetes_versions.html">ADR013: Supported Kubernetes versions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR014-user_authentication_for_products.html">ADR014: User Authentication for Products</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR015-using_values_from_configmaps.html">ADR015: How Should Operators Use Values from ConfigMaps &amp; Secrets</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR016-definition_of_s3_objects.html">ADR016: Representation of S3 Buckets in CRDs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR017-tls_authentication.html">ADR017: TLS authentication</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR018-product_image_versioning.html">ADR018: Product Image Versioning</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR019-trino_catalog_definitions.html">ADR019: Trino catalog definitions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR020-trino_catalog_usage.html">ADR020: Trino catalog usage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR021-stackablectl_stacks_inital_version.html">ADR021: Initial Version of Stackable Stacks Functionality</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR022-spark-history-server.html">ADR022: Spark history server</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR023-product-image-selection.html">ADR023: Product image selection</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR024-out-of-cluster_access.html">ADR024: How to provide stable out-of-cluster access to products</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/ADR025-logging_architecture.html">ADR025: Logging and Log Aggregation Architecture</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Deprecated</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/deprecated/ADR006-choose_orchestrator_storage_backend.html">Use xxx as storage backend for the orchestrator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Drafts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../contributor/adr/drafts/ADRx-choose_authorization_engine.html">Choose Authorization Engine</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../release_notes.html">Release Notes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Stackable Documentation</span>
    <span class="version">nightly</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../commons-operator/stable/index.html">Stackable Commons Operator</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../commons-operator/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../commons-operator/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../commons-operator/0.4/index.html">0.4</a>
        </li>
        <li class="version">
          <a href="../../../commons-operator/0.3/index.html">0.3</a>
        </li>
        <li class="version">
          <a href="../../../commons-operator/0.2/index.html">0.2</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../stable/index.html">Stackable Documentation</a>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../22.11/index.html">22.11</a>
        </li>
        <li class="version">
          <a href="../../22.09/index.html">22.09</a>
        </li>
        <li class="version">
          <a href="../../22.06/index.html">22.06</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../listener-operator/stable/index.html">Stackable Listener Operator</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../listener-operator/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../listener-operator/stable/index.html">23.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../airflow/stable/index.html">Stackable Operator for Apache Airflow</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../airflow/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../airflow/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../airflow/0.6/index.html">0.6</a>
        </li>
        <li class="version">
          <a href="../../../airflow/0.5/index.html">0.5</a>
        </li>
        <li class="version">
          <a href="../../../airflow/0.4/index.html">0.4</a>
        </li>
        <li class="version">
          <a href="../../../airflow/0.3/index.html">0.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../druid/stable/index.html">Stackable Operator for Apache Druid</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../druid/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../druid/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../druid/0.8/index.html">0.8</a>
        </li>
        <li class="version">
          <a href="../../../druid/0.7/index.html">0.7</a>
        </li>
        <li class="version">
          <a href="../../../druid/0.6/index.html">0.6</a>
        </li>
        <li class="version">
          <a href="../../../druid/0.2/index.html">0.2</a>
        </li>
        <li class="version">
          <a href="../../../druid/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../hbase/stable/index.html">Stackable Operator for Apache HBase</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../hbase/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../hbase/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../hbase/0.5/index.html">0.5</a>
        </li>
        <li class="version">
          <a href="../../../hbase/0.4/index.html">0.4</a>
        </li>
        <li class="version">
          <a href="../../../hbase/0.3/index.html">0.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../hdfs/stable/index.html">Stackable Operator for Apache HDFS</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../hdfs/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../hdfs/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../hdfs/0.6/index.html">0.6</a>
        </li>
        <li class="version">
          <a href="../../../hdfs/0.5/index.html">0.5</a>
        </li>
        <li class="version">
          <a href="../../../hdfs/0.4/index.html">0.4</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../hive/stable/index.html">Stackable Operator for Apache Hive</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../hive/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../hive/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../hive/0.8/index.html">0.8</a>
        </li>
        <li class="version">
          <a href="../../../hive/0.7/index.html">0.7</a>
        </li>
        <li class="version">
          <a href="../../../hive/0.6/index.html">0.6</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../kafka/stable/index.html">Stackable Operator for Apache Kafka</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../kafka/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../kafka/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../kafka/0.8/index.html">0.8</a>
        </li>
        <li class="version">
          <a href="../../../kafka/0.7/index.html">0.7</a>
        </li>
        <li class="version">
          <a href="../../../kafka/0.6/index.html">0.6</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../nifi/stable/index.html">Stackable Operator for Apache NiFi</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../nifi/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../nifi/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../nifi/0.8/index.html">0.8</a>
        </li>
        <li class="version">
          <a href="../../../nifi/0.7/index.html">0.7</a>
        </li>
        <li class="version">
          <a href="../../../nifi/0.6/index.html">0.6</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../spark-k8s/stable/index.html">Stackable Operator for Apache Spark on Kubernetes</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../spark-k8s/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../spark-k8s/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../spark-k8s/0.6/index.html">0.6</a>
        </li>
        <li class="version">
          <a href="../../../spark-k8s/0.5/index.html">0.5</a>
        </li>
        <li class="version">
          <a href="../../../spark-k8s/0.4/index.html">0.4</a>
        </li>
        <li class="version">
          <a href="../../../spark-k8s/0.3/index.html">0.3</a>
        </li>
        <li class="version">
          <a href="../../../spark-k8s/0.2/index.html">0.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../superset/stable/index.html">Stackable Operator for Apache Superset</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../superset/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../superset/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../superset/0.7/index.html">0.7</a>
        </li>
        <li class="version">
          <a href="../../../superset/0.6/index.html">0.6</a>
        </li>
        <li class="version">
          <a href="../../../superset/0.5/index.html">0.5</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../zookeeper/stable/index.html">Stackable Operator for Apache ZooKeeper</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../zookeeper/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../zookeeper/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../zookeeper/0.12/index.html">0.12</a>
        </li>
        <li class="version">
          <a href="../../../zookeeper/0.11/index.html">0.11</a>
        </li>
        <li class="version">
          <a href="../../../zookeeper/0.10/index.html">0.10</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../opa/stable/index.html">Stackable Operator for OPA</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../opa/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../opa/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../opa/0.11/index.html">0.11</a>
        </li>
        <li class="version">
          <a href="../../../opa/0.10/index.html">0.10</a>
        </li>
        <li class="version">
          <a href="../../../opa/0.9/index.html">0.9</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../trino/stable/index.html">Stackable Operator for Trino</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../trino/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../trino/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../trino/0.8/index.html">0.8</a>
        </li>
        <li class="version">
          <a href="../../../trino/0.7/index.html">0.7</a>
        </li>
        <li class="version">
          <a href="../../../trino/0.6/index.html">0.6</a>
        </li>
        <li class="version">
          <a href="../../../trino/0.5/index.html">0.5</a>
        </li>
        <li class="version">
          <a href="../../../trino/0.4/index.html">0.4</a>
        </li>
        <li class="version">
          <a href="../../../trino/0.3/index.html">0.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../secret-operator/stable/index.html">Stackable Secret Operator</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../secret-operator/nightly/index.html">nightly</a>
        </li>
        <li class="version is-latest">
          <a href="../../../secret-operator/stable/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../secret-operator/0.6/index.html">0.6</a>
        </li>
        <li class="version">
          <a href="../../../secret-operator/0.5/index.html">0.5</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../stackablectl/stable/index.html">stackablectl</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../stackablectl/stable/index.html">nightly</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../stable/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Stackable Documentation</a></li>
    <li><a href="index.html">Tutorials</a></li>
    <li><a href="authentication_with_openldap.html">Authentication with OpenLDAP</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/stackabletech/documentation/edit/main/modules/tutorials/pages/authentication_with_openldap.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Authentication with OpenLDAP</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Stackable platform supports user authentication with LDAP in multiple products. This page guides you through setting up the configuration necessary to use an exising LDAP installation with Stackable supported products. You can learn more about authentication in the Stackable Platform on the <a href="../concepts/authentication.html" class="xref page">concepts page</a>.</p>
</div>
<div class="paragraph">
<p>Prerequisites:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a k8s cluster available, or <a href="https://kind.sigs.k8s.io/">kind</a> installed</p>
</li>
<li>
<p><a href="../../../stackablectl/stable/index.html" class="xref page">stackablectl</a> installed</p>
</li>
<li>
<p>basic knowledge of how to create resources in Kubernetes (i.e. <code>kubectl apply -f &lt;filename&gt;.yaml</code>) and inspect them (<code>kubectl get</code> or a tool like <a href="https://k9scli.io/">k9s</a>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setup"><a class="anchor" href="#_setup"></a>Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before configuring LDAP you need to set up some services to configure, as well as an LDAP server to use for authentication. This tutorial is about learning how to configure LDAP, so there won&#8217;t be detailed instructions on how to set up all of this, instead the tutorial uses <a href="../../../stackablectl/stable/commands/stack.html" class="xref page">stackablectl Stacks</a>.</p>
</div>
<div class="sect2">
<h3 id="_superset_and_trino_stack"><a class="anchor" href="#_superset_and_trino_stack"></a>Superset and Trino Stack</h3>
<div class="paragraph">
<p>This command will install the latest Stackable release for you, and set up the <code>trino-superset-s3</code> Stack. It contains a Superset instance connected to a Trino instance, and all their dependencies (Minio S3, PostgreSQL). Later in this guide, a Superset and Trino instance will be configured to use LDAP.</p>
</div>
<div class="paragraph">
<p>If you do not have a Kubernetes cluster already, add the <code>--kind-cluster</code> (or <code>-k</code>) flag to let stackablectl deploy one for you.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">stackablectl stack install trino-superset-s3</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will take a few minutes to complete.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The stack installed here is used in the <a href="../../../stackablectl/stable/demos/trino-taxi-data.html" class="xref page"><code>trino-tax-data</code> demo</a>. Click the link to learn more.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="setup_login"><a class="anchor" href="#setup_login"></a>Inspect</h4>
<div class="paragraph">
<p>Before starting to add configuration to your Stackable cluster, inspect what the command above has set up in your Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>Use <code>stackablectl svc list</code> to find the endpoints of Superset and Trino and open their web interfaces in the Browser.</p>
</div>
<div class="paragraph">
<p>You can log into Superset with user <em>admin</em> and password <em>adminadmin</em>, and into Trino with user <em>admin</em> and password <em>adminadmin</em>.</p>
</div>
<div class="paragraph">
<p>These are the current users defined in Superset&#8217;s and Trino&#8217;s internal user management. Later you will see that these users cannot be used for authentication anymore after LDAP authentication has been enabled.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openldap_stack"><a class="anchor" href="#_openldap_stack"></a>OpenLDAP Stack</h3>
<div class="paragraph">
<p>Install another Stack, the <code>tutorial-openldap</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">stackablectl stack install tutorial-openldap</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_inspect"><a class="anchor" href="#_inspect"></a>Inspect</h4>
<div class="paragraph">
<p>Look at the Pod definition of the <code>openldap-0</code> Pod, it contains the environment settings</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">LDAP_ADMIN_USERNAME:      ldapadmin
LDAP_ADMIN_PASSWORD:      ldapadminpassword
LDAP_USERS:               alice,bob
LDAP_PASSWORDS:           alice,bob</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ldapadmin</code> is the admin or bind user, and <code>ldapadminpassword</code> is the password that belongs to that user. <code>alice</code> and <code>bob</code> (and their respective passwords) are the only two users defined in the LDAP instance. You will use this information later to configure LDAP.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps"><a class="anchor" href="#_steps"></a>Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have a couple of data products installed as well as an LDAP server, you can start configuring the products to use LDAP. The following image shows the parts that are already there in blue and the parts you will add in green:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/openldap-tutorial.drawio.svg" alt="image$openldap tutorial.drawio">
</div>
</div>
<div class="paragraph">
<p>The tutorial has 3 steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure an AuthenticationClass (as well as SecretClass and Secret) with this LDAP installation</p>
</li>
<li>
<p>Update the SupersetCluster to use the AuthenticationClass to authenticate users</p>
</li>
<li>
<p>Update the TrinoCluster to use the AuthenticationClass to authenticate users</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_configure_ldap"><a class="anchor" href="#_configure_ldap"></a>Configure LDAP</h3>
<div class="paragraph">
<p>The AuthenticationClass is the main resource required to configure the products, but it depends on some other resources. Below you will create a Secret, SecretClass and the AuthenticationClass. Use <code>kubectl apply</code> to deploy the manifests shown below.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you&#8217;re having problems here, install the <code>openldap</code> stack instead of <code>tutorial-openldap</code> which comes with an already configured AuthenticationClass ready to use. You can then skip to <a href="#superset">configuring superset</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First, create a secret that contains the LDAP bind credentials which products can use to authenticate with LDAP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: v1
kind: Secret
metadata:
  name: openldap-bind-credentials
  labels:
    secrets.stackable.tech/class: openldap-bind-credentials  <i class="conum" data-value="1"></i><b>(1)</b>
stringData:
  user: cn=ldapadmin,dc=example,dc=org  <i class="conum" data-value="2"></i><b>(2)</b>
  password: ldapadminpassword           <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The annotation which SecretClass this secret belongs to</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The LDAP bind user that was provided by the <code>tutorial-ldap</code> Stack</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The corresponding password</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Notice the SecretClass annotation. Create the SecretClass next:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: secrets.stackable.tech/v1alpha1
kind: SecretClass
metadata:
  name: openldap-bind-credentials  <i class="conum" data-value="1"></i><b>(1)</b>
spec:
  backend:
    k8sSearch:
      searchNamespace:
        pod: {}  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the <a href="../../../secret-operator/stable/secretclass.html" class="xref page"><code>SecretClass</code></a> we are creating that is referred to by the Secret</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This determines the namespace in which the referenced <code>Secret</code> will be looked for. In this case it searches for a <code>Secret</code> in the same namespace as the product runs in. See <a href="../../../secret-operator/stable/secretclass.html#backend-k8ssearch" class="xref page">the documentation of SecretClass</a></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This level of indirection is necessary, because the AuthenticationClass is cluster-scoped but Secrets are not.</p>
</div>
<div class="paragraph">
<p>Now you can create the AuthenticationClass <code>openldap</code> which references the SecretClass:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: authentication.stackable.tech/v1alpha1
kind: AuthenticationClass
metadata:
  name: openldap  <i class="conum" data-value="1"></i><b>(1)</b>
spec:
  provider:
    ldap:
      hostname: openldap.default.svc.cluster.local  <i class="conum" data-value="2"></i><b>(2)</b>
      searchBase: ou=users,dc=example,dc=org
      bindCredentials:
        secretClass: openldap-bind-credentials  <i class="conum" data-value="3"></i><b>(3)</b>
      port: 1636
      tls:
        verification:
          server:
            caCert:
              secretClass: openldap-tls</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The name of the AuthenticationClass, which needs to be referenced later</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The hostname in this case is the Service at which the OpenLDAP is running, inside of Kubernetes.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Here the SecretClass name is referenced</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Remember the name of the AuthenticationClass (<code>openldap</code>), you will use it in the next steps when configuring the products.</p>
</div>
</div>
<div class="sect2">
<h3 id="superset"><a class="anchor" href="#superset"></a>Add LDAP authentication to Superset</h3>
<div class="paragraph">
<p>To make Superset use your new LDAP AuthenticationClass, you have to update the SupersetCluster definition. A SupersetCluster named <code>superset</code> is already installed by the stack.</p>
</div>
<div class="paragraph">
<p>Fetch the existing SupersetCluster defintion from the Kubernetes API server and save it into a <code>superset.yaml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get superset superset -o yaml &gt; superset.yaml</code></pre>
</div>
</div>
<details>
<summary class="title">The <code>superset.yaml</code> file should look similar to this</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: superset.stackable.tech/v1alpha1
kind: SupersetCluster
metadata:
  name: superset
  ...
spec:
  version: ...
  statsdExporterVersion: ...
  credentialsSecret: superset-credentials
  nodes:
    roleGroups:
      default:
        config:
  ...</code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>You can now delete the SupersetCluster, you recreate it later with the new configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl delete superset superset</code></pre>
</div>
</div>
<div class="paragraph">
<p>Modify your <code>superset.yaml</code> to include this new <code>authenticationConfig</code> property under the <code>spec</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  authenticationConfig:            <i class="conum" data-value="1"></i><b>(1)</b>
    authenticationClass: openldap  <i class="conum" data-value="2"></i><b>(2)</b>
    userRegistrationRole: Admin    <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The new <code>authenticationConfig</code> section which configures how Superset is authenticating users</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>authenticationClass</code> property is referencing the AuthenticationClass <code>openldap</code> you created earlier</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The default Superset role that users should be assigned to when they log in. Any user will be an Admin</td>
</tr>
</table>
</div>
<details>
<summary class="title">Your <code>superset.yaml</code> should now look similar to this</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: superset.stackable.tech/v1alpha1
kind: SupersetCluster
metadata:
  name: superset
  ...
spec:
  version: ...
  statsdExporterVersion: ...
  credentialsSecret: superset-credentials
  authenticationConfig:
    authenticationClass: openldap
    userRegistrationRole: Admin
  nodes:
    roleGroups:
      default:
        config:
  ...</code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Now deploy the updated superset cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f superset.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Connect to superset as before, and try logging in again with username <em>admin</em> and password <em>adminadmin</em>, Superset will not accept these credentials anymore. You now have to use LDAP credentials to log in. The OpenLDAP you installed earlier comes with two users, <em>alice</em> (password <em>alice</em>) and <em>bob</em> (password <em>bob</em>). Log in with any of these users and Superset will accept.</p>
</div>
</div>
<div class="sect2">
<h3 id="trino"><a class="anchor" href="#trino"></a>Add LDAP configuration to Trino</h3>
<div class="paragraph">
<p>Trino is configured very similarly to Superset.</p>
</div>
<div class="paragraph">
<p>Fetch the existing TrinoCluster defintion from the Kubernetes API server and save it into a <code>trino.yaml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get trino trino -o yaml &gt; trino.yaml</code></pre>
</div>
</div>
<details>
<summary class="title">The <code>trino.yaml</code> file should look similar to this</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: trino.stackable.tech/v1alpha1
kind: TrinoCluster
metadata:
  name: trino
  ...
spec:
  version: 396-stackable0.1.0
  authentication:
    method:
      multiUser:
        ...
  opa:
    configMapName: opa
    package: trino
  catalogLabelSelector:
    ...
  workers:
    ...
  coordinators:
    ...
  ...</code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>You can now delete the TrinoCluster. you recreate it later with the new configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl delete trino trino</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the <code>multiUser</code> authentication method in your <code>trino.yaml</code> with an <code>ldap</code> method that references the <code>openldap</code> AuthenticationClass:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  authentication:
    method:
      ldap:                            <i class="conum" data-value="1"></i><b>(1)</b>
        authenticationClass: openldap  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The new <code>ldap</code> authentication method replaces the previous <code>multiUser</code> authentication method</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>authenticationClass</code> property is referencing the AuthenticationClass <code>openldap</code> you created earlier</td>
</tr>
</table>
</div>
<details>
<summary class="title">Your <code>trino.yaml</code> should now look similar to this</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: trino.stackable.tech/v1alpha1
kind: TrinoCluster
metadata:
  name: trino
  ...
spec:
  version: 396-stackable0.1.0
  authentication:
    method:
      ldap:
        authenticationClass: openldap
  opa:
    configMapName: opa
    package: trino
  catalogLabelSelector:
    ...
  workers:
    ...
  coordinators:
    ...
  ...</code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Now deploy the updated Trino cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f trino.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, like with Superset, connect to Trino now (make sure that the StatefulSets are running). You will notice that the <em>admin</em> user cannot be used anymore, but the LDAP users <em>alice</em> and <em>bob</em> work!</p>
</div>
</div>
<div class="sect2">
<h3 id="_bonus_reconfigure_opa_to_use_the_new_ldap_users"><a class="anchor" href="#_bonus_reconfigure_opa_to_use_the_new_ldap_users"></a>Bonus: Reconfigure OPA to use the new LDAP users</h3>
<div class="paragraph">
<p>This is a bonus step, and if you want you can skip straight to the next section: <a href="#trino_try_it">Log in with the new LDAP credentials</a></p>
</div>
<div class="paragraph">
<p>This step is not required for <em>authentication</em> by itself. But the demo stack you installed comes with an <em>authorization</em> configuration for Trino as well. Authorization on the platform is done using the <a href="../../../opa/stable/index.html" class="xref page">Stackable Operator for OPA (OpenPolicyAgent)</a>.</p>
</div>
<div class="paragraph">
<p>Fetch the snippet as before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get cm trino-opa-bundle -o yaml &gt; trino-opa-bundle.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Apply this patch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  trino.rego: |
    package trino

    default allow = false

    allow {
      input.context.identity.user == "alice"
    }

    allow {
      input.context.identity.user == "bob"
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>And apply the new bundle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f trino-opa-bundle.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The OPA Operator will automatically detect the change and update the Trino authorization bundle.</p>
</div>
</div>
<div class="sect2">
<h3 id="trino_try_it"><a class="anchor" href="#trino_try_it"></a>Log in with the new LDAP credentials</h3>
<div class="paragraph">
<p>Congratulations! You have configured Superset and Trino to use LDAP for authentication.</p>
</div>
<div class="paragraph">
<p>Log in with the LDAP user credentials <code>alice:alice</code> or <code>bob:bob</code> into Superset and Trino. Note also that the previously used <code>admin</code> credentials no longer work.</p>
</div>
<div class="paragraph">
<p>If you skipped the OPA step, you will be able to log into Trino, but running queries will not work, as the LDAP users are not authorized to do so. If you <em>did</em> do this step, running queries with the LDAP users will also work.</p>
</div>
<div class="paragraph">
<p>That concludes the tutorial!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To summarize, you have done the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Written an AuthenticationClass for an existing LDAP server. The credentials are stored in a Secret with a SecretClass that is referenced in the AuthenticationClass.</p>
</li>
<li>
<p>Adapted the SupersetCluster spec to include the reference to the LDAP AuthenticationClass.</p>
</li>
<li>
<p>Adapted the TrinoCluster spec to include the reference to the AuthenticationClass.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The LDAP connection details only need to be written down once, in the AuthenticationClass. Making a product use this AuthenticationClass is then done by referencing the AuthenticationClass, so the configuration for LDAP is all in a single resource.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_reading"><a class="anchor" href="#_further_reading"></a>Further Reading</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../concepts/authentication.html" class="xref page">Authentication concepts page</a></p>
</li>
<li>
<p><a href="../reference/authenticationclass.html" class="xref page">AuthenticationClass reference</a></p>
</li>
<li>
<p><a href="../../../superset/stable/getting_started/index.html" class="xref page">Getting started with the Stackable Operator for Apache Superset</a></p>
</li>
<li>
<p><a href="../../../trino/stable/getting_started/index.html" class="xref page">Getting started with the Stackable Operator for Trino</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
    </div>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-container">
      <!-- link columns -->
      <div class="footer-info">
        <div class="footer-info-item-large">
          <img src="../../../_/img/logo-2-1.png">
          <p>
            your data, your platform
          </p>
        </div>
        <div class="footer-info-item">
          <h2>Company</h2>
          <ul class="footer-link-list">
            <li>
              <a href="https://stackable.tech/en/about-us">About Us</a>
            </li>
            <li>
              <a href="https://stackable.tech/en/blog">Blog</a>
            </li>
            <li>
              <a href="https://jobs.stackable.de/" target="_blank">Jobs</a>
            </li>
          </ul>
        </div>
        <div class="footer-info-item">
          <h2>Support</h2>
          <ul class="footer-link-list">
            <li>
              <a href="https://stackable.tech/en/contact">Contact Us</a>
            </li>
            <li>
              <a href="https://stackable.tech/en/imprint">Imprint</a>
            </li>
            <li>
              <a href="https://stackable.tech/en/data-protection">Data Protection</a>
            </li>
          </ul>
        </div>
        <div class="footer-info-item">
          <h2>Get in touch</h2>
          <ul class="footer-link-list">
            <li>
              <a href="mailto:info@stackable.de">info@stackable.de</a>
            </li>
            <li>
              <a href="tel:+4941039263100">+49 4103 926 3100</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="footer-seperator"></div>
      <!-- social links -->
      <div class="c-and-socials">
        <div> 2022 Stackable.</div>
        <div class="social-icons-container">
          <a class="social-icon" href="https://www.xing.com/pages/stackable" target="_blank">
            <i class="fab fa-xing"></i>
          </a>
          <a class="social-icon" href="https://www.linkedin.com/company/stackabletech/" target="_blank">
            <i class="fab fa-linkedin"></i>
          </a>
          <a class="social-icon" href="https://github.com/stackabletech" target="_blank">
            <i class="fab fa-github"></i>
          </a>
          <a class="social-icon" href="https://twitter.com/stackabletech" target="_blank">
            <i class="fab fa-twitter"></i>
          </a>
        </div>
      </div>
      <!-- copyright notice -->
      <p>
        Apache, Apache Kafka, Kafka, and the Kafka logo, Apache Druid, Druid, and the Druid logo,
        Apache ZooKeeper, ZooKeeper, and the Druid logo, Apache Hive, Hive, and the Hive logo,
        Apache Spark, Spark, and the Spark logo, Apache Airflow, Airflow, and the Airflow logo,
        Apache HBase, HBase, and the HBase logo, Apache NiFi, NiFi, and the NiFi logo, Apache
        Superset, Superset, the Superset logo, Apache Hadoop HDFS, Apache Hadoop, Hadoop and the
        Hadoop logo, Apache Phoenix, Phoenix and the Phoenix-Logo, Apache Iceberg, Iceberg and the
        Iceberg-Logo are either registered trademarks or trademarks of the Apache Software Foundation
        in the United States and/or other countries. Open Policy Agent (OPA) is a Cloud Native
        Computing Foundation graduated project. Licensed under the Apache License, Version 2.0. Trino
        is open source software licensed under the Apache License 2.0 and supported by the Trino
        Software Foundation. MinIO is a [registered, if applicable] trademark of the MinIO
        Corporation. All other products or name brands are trademarks of their respective holders.
        All product and service names used in this website are for identification purposes only and
        do not imply endorsement.
      </p>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
